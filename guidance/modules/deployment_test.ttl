@prefix ns1: <http://example.org/guidance#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .

# Test Configuration Classes
ns1:DeploymentTest rdf:type owl:Class ;
    rdfs:label "Deployment Test" ;
    rdfs:comment "Test configuration for deployment" ;
    owl:versionInfo "1.0.0" .

ns1:ServiceTest rdf:type owl:Class ;
    rdfs:label "Service Test" ;
    rdfs:comment "Test configuration for a service" ;
    rdfs:subClassOf ns1:DeploymentTest ;
    owl:versionInfo "1.0.0" .

ns1:JenaFusekiTest rdf:type owl:Class ;
    rdfs:label "Jena Fuseki Test" ;
    rdfs:comment "Test configuration for Jena Fuseki" ;
    rdfs:subClassOf ns1:ServiceTest ;
    owl:versionInfo "1.0.0" .

ns1:LoggingTest rdf:type owl:Class ;
    rdfs:label "Logging Test" ;
    rdfs:comment "Test configuration for logging" ;
    rdfs:subClassOf ns1:DeploymentTest ;
    owl:versionInfo "1.0.0" .

# Test Properties
ns1:hasTestName rdf:type owl:DatatypeProperty ;
    rdfs:label "Test Name" ;
    rdfs:comment "Name of the test" ;
    rdfs:domain ns1:DeploymentTest ;
    rdfs:range xsd:string ;
    owl:versionInfo "1.0.0" .

ns1:hasTestDescription rdf:type owl:DatatypeProperty ;
    rdfs:label "Test Description" ;
    rdfs:comment "Description of the test" ;
    rdfs:domain ns1:DeploymentTest ;
    rdfs:range xsd:string ;
    owl:versionInfo "1.0.0" .

ns1:hasTestEndpoint rdf:type owl:DatatypeProperty ;
    rdfs:label "Test Endpoint" ;
    rdfs:comment "Endpoint to test" ;
    rdfs:domain ns1:ServiceTest ;
    rdfs:range xsd:anyURI ;
    owl:versionInfo "1.0.0" .

ns1:hasExpectedResponse rdf:type owl:DatatypeProperty ;
    rdfs:label "Expected Response" ;
    rdfs:comment "Expected response from the test" ;
    rdfs:domain ns1:ServiceTest ;
    rdfs:range xsd:string ;
    owl:versionInfo "1.0.0" .

ns1:hasLogLevel rdf:type owl:DatatypeProperty ;
    rdfs:label "Log Level" ;
    rdfs:comment "Logging level for the test" ;
    rdfs:domain ns1:LoggingTest ;
    rdfs:range xsd:string ;
    owl:versionInfo "1.0.0" .

ns1:hasLogPattern rdf:type owl:DatatypeProperty ;
    rdfs:label "Log Pattern" ;
    rdfs:comment "Pattern to match in logs" ;
    rdfs:domain ns1:LoggingTest ;
    rdfs:range xsd:string ;
    owl:versionInfo "1.0.0" .

# Test Instances
ns1:fusekiHealthCheck rdf:type ns1:JenaFusekiTest ;
    rdfs:label "Fuseki Health Check" ;
    rdfs:comment "Test to check if Fuseki is running" ;
    ns1:hasTestName "health_check" ;
    ns1:hasTestDescription "Check if Fuseki service is running" ;
    ns1:hasTestEndpoint "http://localhost:3030/$/ping" ;
    ns1:hasExpectedResponse "pong" .

ns1:fusekiDatasetCheck rdf:type ns1:JenaFusekiTest ;
    rdfs:label "Fuseki Dataset Check" ;
    rdfs:comment "Test to check if dataset exists" ;
    ns1:hasTestName "dataset_check" ;
    ns1:hasTestDescription "Check if guidance dataset exists" ;
    ns1:hasTestEndpoint "http://localhost:3030/guidance" ;
    ns1:hasExpectedResponse "200" .

ns1:fusekiLogCheck rdf:type ns1:LoggingTest ;
    rdfs:label "Fuseki Log Check" ;
    rdfs:comment "Test to check Fuseki logs" ;
    ns1:hasTestName "log_check" ;
    ns1:hasTestDescription "Check if Fuseki logs contain expected patterns" ;
    ns1:hasLogLevel "INFO" ;
    ns1:hasLogPattern "Server started" .

ns1:fusekiErrorLogCheck rdf:type ns1:LoggingTest ;
    rdfs:label "Fuseki Error Log Check" ;
    rdfs:comment "Test to check Fuseki error logs" ;
    ns1:hasTestName "error_log_check" ;
    ns1:hasTestDescription "Check if Fuseki error logs are empty" ;
    ns1:hasLogLevel "ERROR" ;
    ns1:hasLogPattern "" .

# SHACL Validation
ns1:JenaFusekiTestShape rdf:type sh:NodeShape ;
    sh:targetClass ns1:JenaFusekiTest ;
    sh:property [
        sh:path ns1:hasTestName ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasTestDescription ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasTestEndpoint ;
        sh:datatype xsd:anyURI ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasExpectedResponse ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] .

ns1:LoggingTestShape rdf:type sh:NodeShape ;
    sh:targetClass ns1:LoggingTest ;
    sh:property [
        sh:path ns1:hasTestName ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasTestDescription ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasLogLevel ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path ns1:hasLogPattern ;
        sh:datatype xsd:string ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
    ] . 