name: graphdb-dev
resourceGroup: GRAPHDB_RG
location: westus
properties:
  managedEnvironmentId: /subscriptions/dae16755-7832-4e6d-bae2-c49ff833042f/resourceGroups/GRAPHDB_RG/providers/Microsoft.App/managedEnvironments/graphdb-env
  configuration:
    ingress:
      external: true
      targetPort: 7200
    secrets:
      - name: graphdb-password
        value: graphdb-dev-password
    registries:
      - server: docker.io
  template:
    containers:
      - name: graphdb
        image: ontotext/graphdb:10.4.1
        env:
          - name: GDB_HEAP_SIZE
            value: 2g
          - name: GDB_JAVA_OPTS
            value: "-Xms2g -Xmx2g"
        volumeMounts:
          - volumeName: graphdb-data
            mountPath: /opt/graphdb/home
    volumes:
      - name: graphdb-data
        storageType: azureFile
        storageName: graphdbshare
        storageAccountName: graphdbstore711034d5
    scale:
      minReplicas: 1
      maxReplicas: 1 